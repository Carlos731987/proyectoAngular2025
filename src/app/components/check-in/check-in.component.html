<div class="check-in-container">
  <div class="form-card">
    <h2 class="text-4xl font-extrabold title-font text-center mb-8">
      Crea tu Cuenta
    </h2>
    <form [formGroup]="registroForm" (ngSubmit)="onSubmit()" class="space-y-6">
      <!-- Nombre Completo -->
      <div class="form-row">
        <div class="form-group w-full md:w-1/2 md:pr-2">
          <label for="nombre" class="label-style">Nombre:</label>
          <input
            id="nombre"
            type="text"
            formControlName="nombre"
            placeholder="Tu nombre"
            class="input-style"
            [ngClass]="{
              'border-red-500':
                registroForm.get('nombre')?.invalid &&
                registroForm.get('nombre')?.touched
            }"
          />
          <div
            *ngIf="
              registroForm.get('nombre')?.invalid &&
              registroForm.get('nombre')?.touched
            "
            class="error-message-text"
          >
            <span *ngIf="registroForm.get('nombre')?.errors?.['required']"
              >El nombre es obligatorio.</span
            >
            <span *ngIf="registroForm.get('nombre')?.errors?.['minlength']"
              >Mínimo 2 caracteres.</span
            >
            <span *ngIf="registroForm.get('nombre')?.errors?.['noNumbers']"
              >No se permiten números.</span
            >
          </div>
        </div>

        <div class="form-group w-full md:w-1/2 md:pl-2">
          <label for="apellido" class="label-style">Apellido:</label>
          <input
            id="apellido"
            type="text"
            formControlName="apellido"
            placeholder="Tu apellido"
            class="input-style"
            [ngClass]="{
              'border-red-500':
                registroForm.get('apellido')?.invalid &&
                registroForm.get('apellido')?.touched
            }"
          />
          <div
            *ngIf="
              registroForm.get('apellido')?.invalid &&
              registroForm.get('apellido')?.touched
            "
            class="error-message-text"
          >
            <span *ngIf="registroForm.get('apellido')?.errors?.['required']"
              >El apellido es obligatorio.</span
            >
            <span *ngIf="registroForm.get('apellido')?.errors?.['minlength']"
              >Mínimo 2 caracteres.</span
            >
            <span *ngIf="registroForm.get('apellido')?.errors?.['noNumbers']"
              >No se permiten números.</span
            >
          </div>
        </div>
      </div>

      <!-- Teléfono (Mantenido del original) -->
      <div class="form-group">
        <label for="telefono" class="label-style">Teléfono:</label>
        <input
          id="telefono"
          type="tel"
          formControlName="telefono"
          placeholder="Ej: 1122334455"
          class="input-style"
          [ngClass]="{
            'border-red-500':
              registroForm.get('telefono')?.invalid &&
              registroForm.get('telefono')?.touched
          }"
        />
        <div
          *ngIf="
            registroForm.get('telefono')?.invalid &&
            registroForm.get('telefono')?.touched
          "
          class="error-message-text"
        >
          <span *ngIf="registroForm.get('telefono')?.errors?.['required']"
            >El teléfono es obligatorio.</span
          >
          <span *ngIf="registroForm.get('telefono')?.errors?.['pattern']"
            >Formato no válido (solo números, 10-15 dígitos).</span
          >
        </div>
      </div>

      <!-- Correo -->
      <div class="form-group">
        <label for="correo" class="label-style">Correo:</label>
        <input
          id="correo"
          type="email"
          formControlName="correo"
          placeholder="ejemplo@correo.com"
          class="input-style"
          [ngClass]="{
            'border-red-500':
              registroForm.get('correo')?.invalid &&
              registroForm.get('correo')?.touched
          }"
        />
        <div
          *ngIf="
            registroForm.get('correo')?.invalid &&
            registroForm.get('correo')?.touched
          "
          class="error-message-text"
        >
          <span *ngIf="registroForm.get('correo')?.errors?.['required']"
            >El correo es obligatorio.</span
          >
          <span *ngIf="registroForm.get('correo')?.errors?.['email']"
            >Debe ser un correo electrónico válido.</span
          >
        </div>
      </div>

      <!-- Contraseña -->
      <div class="form-group">
        <label for="contrasena" class="label-style">Contraseña:</label>
        <input
          id="contrasena"
          type="password"
          formControlName="contrasena"
          placeholder="Mínimo 6 caracteres"
          class="input-style"
          [ngClass]="{
            'border-red-500':
              registroForm.get('contrasena')?.invalid &&
              registroForm.get('contrasena')?.touched
          }"
        />
        <div
          *ngIf="
            registroForm.get('contrasena')?.invalid &&
            registroForm.get('contrasena')?.touched
          "
          class="error-message-text"
        >
          <span *ngIf="registroForm.get('contrasena')?.errors?.['required']"
            >La contraseña es obligatoria.</span
          >
          <span *ngIf="registroForm.get('contrasena')?.errors?.['minlength']"
            >Mínimo 6 caracteres.</span
          >
        </div>
      </div>

      <!-- Confirmar Contraseña -->
      <div class="form-group">
        <label for="confirmarContrasena" class="label-style"
          >Confirmar Contraseña:</label
        >
        <input
          id="confirmarContrasena"
          type="password"
          formControlName="confirmarContrasena"
          placeholder="Repite la contraseña"
          class="input-style"
          [ngClass]="{'border-red-500': registroForm.errors?.['passwordsMismatch'] && registroForm.get('confirmarContrasena')?.touched}"
        />
        <div
          *ngIf="
            registroForm.get('confirmarContrasena')?.touched &&
            registroForm.get('confirmarContrasena')?.errors
          "
          class="error-message-text"
        >
          <span
            *ngIf="registroForm.get('confirmarContrasena')?.errors?.['required']"
            >Debe confirmar la contraseña.</span
          >
          <!-- Muestra el error de validación cruzada -->
          <span
            *ngIf="registroForm.errors?.['passwordsMismatch'] && registroForm.get('confirmarContrasena')?.touched"
            >Las contraseñas no coinciden.</span
          >
        </div>
      </div>

      <!-- Aceptar Términos (Mantenido del original) -->
      <div class="checkbox-group">
        <input
          id="aceptaTerminos"
          type="checkbox"
          formControlName="aceptaTerminos"
        />
        <label for="aceptaTerminos" class="text-sm font-medium text-gray-700"
          >Acepto los términos y condiciones</label
        >
        <div
          *ngIf="
            registroForm.get('aceptaTerminos')?.invalid &&
            registroForm.get('aceptaTerminos')?.touched
          "
          class="error-message-text"
        >
          Debe aceptar los términos y condiciones.
        </div>
      </div>

      <!-- Muestra el error del servidor (Firebase) -->
      <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>

      <button
        type="submit"
        [disabled]="registroForm.invalid"
        class="submit-button green-button"
      >
        REGISTRARME
      </button>
    </form>

    <p class="mt-6 text-center text-sm text-gray-500">
      Formulario activado desde: {{ fechaRegistro | date : "mediumDate" }}
    </p>

    <p class="mt-4 text-center text-sm text-gray-500">
      ¿Ya tienes cuenta?
      <a
        [routerLink]="['/iniciar-sesion']"
        class="font-bold text-indigo-500 hover:text-indigo-400 transition duration-200"
        >Inicia sesión aquí.</a
      >
    </p>
  </div>
</div>
